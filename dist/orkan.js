!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("orkan",[],e):"object"==typeof exports?exports.orkan=e():t.orkan=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=20)}([function(t,e){t.exports=require("mobx")},function(t,e){t.exports=require("lodash/isObject")},function(t,e){t.exports=require("prop-types")},function(t,e){t.exports=require("react")},function(t,e){t.exports=require("lodash/isPlainObject")},function(t,e){t.exports=require("autobind-decorator")},function(t,e){t.exports=require("classnames")},function(t,e){t.exports=require("lodash/forEach")},function(t,e){t.exports=require("lodash/isArray")},function(t,e){t.exports=require("react-dom")},function(t,e){t.exports=require("firebase/app")},function(t,e){t.exports=require("lodash/find")},function(t,e){t.exports=require("invariant")},function(t,e,n){var r=n(25);"string"==typeof r&&(r=[[t.i,r,""]]);n(23)(r,{});r.locals&&(t.exports=r.locals)},function(t,e){t.exports=require("lodash/mapKeys")},function(t,e){t.exports=require("lodash/mapValues")},function(t,e){t.exports=require("lodash/assignWith")},function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var o=t[r];"."===o?t.splice(r,1):".."===o?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return r.exec(t).slice(1)};function i(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,r="/"===a.charAt(0))}return e=n(i(e.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),o="/"===a(t,-1);return(t=n(i(t.split("/"),function(t){return!!t}),!r).join("/"))||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var o=r(t.split("/")),i=r(n.split("/")),a=Math.min(o.length,i.length),s=a,u=0;u<a;u++)if(o[u]!==i[u]){s=u;break}var c=[];for(u=s;u<o.length;u++)c.push("..");return(c=c.concat(i.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},e.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){return o(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(26))},function(t,e){t.exports=require("humaninput/dist/humaninput-full.min")},function(t,e){t.exports=require("mobx-react")},function(t,e,n){"use strict";n.r(e);var r=n(3),o=n.n(r),i=n(9),a=n.n(i),s=n(2),u=n.n(s),c=n(19),l=n(0),f=n(5),h=n.n(f),p=n(6),d=n.n(p),v=n(18),y=n.n(v),b=new(function(){function t(){this.binder=new y.a(window)}return t.prototype.bind=function(t,e){this.binder.on(t,e)},t.prototype.unbind=function(t,e){this.binder.off(t,e)},t.prototype.isDown=function(t){return this.binder.state.down.indexOf(t)>-1&&1===this.binder.state.down.length},t}()),m=n(17),g=n.n(m),S=n(4),w=n.n(S),P=n(1),x=n.n(P),O=n(8),j=n.n(O),A=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},k=/\.|\[|\]\.|\]/,_=function(){function t(t){this.map=new l.ObservableMap({}),this.merge(t)}return t.prototype.get=function(t,e){void 0===e&&(e=this.map);var n,r=t.split(k).filter(function(t){return!!t}),o=r.shift();return Object(l.isObservableMap)(e)?n=e.get(o):Object(l.isObservableArray)(e)&&(n=e[o]),r.length&&(Object(l.isObservableMap)(n)||Object(l.isObservableArray)(n))?this.get(r.join("."),n):n},t.prototype.shallowSet=function(t,e,n){w()(n)||Object(l.isObservableObject)(n)?n=T(n):(j()(n)||Object(l.isObservableArray)(n))&&(n=R(n)),Object(l.isObservableMap)(t)?t.set(e,n):Object(l.isObservableArray)(t)&&(t[e]=n)},t.prototype.set=function(t,e,n){void 0===n&&(n=this.map);var r=t.split(k).filter(function(t){return!!t}),o=r.shift();if(!r.length)return this.shallowSet(n,o,e);var i=this.get(o,n);return i||(isNaN(r[0])?this.shallowSet(n,o,new l.ObservableMap({})):this.shallowSet(n,o,[])),i=this.get(o,n),this.set(r.join("."),e,i)},t.prototype.merge=function(t){this.map.merge(T(t))},t.prototype.clear=function(){this.map.clear()},t.prototype.toJS=function(){return Object(l.toJS)(this.map)},A([l.action],t.prototype,"shallowSet",null),A([l.action],t.prototype,"set",null),A([l.action],t.prototype,"merge",null),A([l.action],t.prototype,"clear",null),t}();function T(t){var e=new l.ObservableMap(t);return e.forEach(function(t,n){w()(t)||Object(l.isObservableObject)(t)?e.set(n,T(t)):j()(t)||Object(l.isObservableArray)(t)?e.set(n,R(t)):x()(t)&&!w()(t)&&e.set(n,t)}),e}function R(t){return t.map(function(t){return w()(t)||Object(l.isObservableObject)(t)?T(t):j()(t)||Object(l.isObservableArray)(t)?R(t):x()(t)&&!w()(t)?l.observable.ref(t):t})}var C,L,M,q,V,B,E=function(){return(E=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},U=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},F=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},D=function(){function t(t,e){void 0===e&&(e="orkan"),this.pathsStatus=l.observable.map({}),this.map=new _({}),this.database=t,this.rootPath=e}return t.prototype.toAbsolutePath=function(t){return g.a.join(this.rootPath,t)},t.prototype.getValue=function(t){var e=this.map.get(t.split("/").join("."));return Object(l.isObservable)(e)?Object(l.toJS)(e):e},t.prototype.setValue=function(t,e){return this.database.ref(this.toAbsolutePath(t)).set(e)},t.prototype.push=function(t){return this.database.ref(this.toAbsolutePath(t)).push()},t.prototype.listen=function(t){var e=this,n=function(n){var r=n.exportVal(),o=t.split("/").join(".");r?e.map.set(o,r):e.map.set(o,null),e.setPathIsLoading(t,!1)};return this.setPathIsLoading(t,!0),this.database.ref(this.toAbsolutePath(t)).on("value",n),function(){e.database.ref(e.toAbsolutePath(t)).off("value",n)}},t.prototype.load=function(t){return U(this,void 0,void 0,function(){var e,n,r;return F(this,function(o){switch(o.label){case 0:return this.setPathIsLoading(t,!0),[4,this.database.ref(this.toAbsolutePath(t)).once("value")];case 1:return e=o.sent(),n=e.exportVal(),r=t.split("/").join("."),this.map.set(r,n),this.setPathIsLoading(t,!1),[2,n]}})})},t.prototype.remove=function(t){return this.database.ref(this.toAbsolutePath(t)).remove()},t.prototype.clearCache=function(t){var e=t.split("/").join(".");this.map.set(e,null)},t.prototype.setPathStatus=function(t,e){var n=this.pathsStatus.get(t)||{};this.pathsStatus.set(t,E({},n,e))},t.prototype.setPathIsLoading=function(t,e){this.pathsStatus.get(t)&&e||this.setPathStatus(t,{isLoading:e})},t.prototype.isPathLoading=function(t){var e=this.pathsStatus.get(t);return e&&e.isLoading},t}(),I=n(16),K=n.n(I),N=n(15),J=n.n(N),G=n(14),Y=n.n(G),z=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return K.a.apply(void 0,[{},t].concat(e.map(function(e){return"string"==typeof e?{root:e}:"object"==typeof e?J()(e,function(e){return"string"==typeof e?e:(n=e,d()(Y()(n,function(e,n){return t[n]})));var n}):void 0}),[function(t,e){return d()(t,e)}]))},H=n(13),$=n.n(H),X=(C=function(t,e){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}C(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return X(e,t),e.prototype.render=function(){var t=this.props,e=t.className,n=t.isBusy,r=z($.a,e,{root:{notBusy:!n,busy:n}});return o.a.createElement("div",{className:r.root})},e.propTypes={isBusy:u.a.bool},e}(r.Component),W=n(12),Q=n.n(W),tt=n(7),et=n.n(tt),nt=n(11),rt=n.n(nt),ot=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},it=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={});var n=this;this.isDirty=!1,this.errors=l.observable.map({}),this.dataMap=new _({}),this.validation={},this.dataMap.merge(t),this.validation=e,this.destroyReaction=Object(l.reaction)(function(){return n.data},function(){!n.ignoreChange&&n.setDirty(),n.ignoreChange=!1;var t=Array.from(n.errors.keys());n.clearAllErrors(),n.validateFields(t)},{name:"FormStore dirty check",fireImmediately:!1,delay:1})}return Object.defineProperty(t.prototype,"data",{get:function(){return this.toJS()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isValid",{get:function(){var t=this;return!rt()(this.validation,function(e,n){return!t.isFieldValid(n)})},enumerable:!0,configurable:!0}),t.prototype.getFieldError=function(t){var e=this.get(t),n=this.validation[t]&&this.validation[t].find(function(t){return!t.validate(e)});return n&&n.error},t.prototype.isFieldValid=function(t){var e=this.get(t);return!(this.validation[t]&&this.validation[t].find(function(t){return!t.validate(e)}))},t.prototype.validateFields=function(t){var e=this;void 0===t&&(t=[]),t.forEach(function(t){e.errors.set(t,e.getFieldError(t))})},t.prototype.clearFieldErrors=function(t){var e=this;void 0===t&&(t=[]),et()(t,function(t){e.errors.delete(t)})},t.prototype.clearAllErrors=function(){this.errors.clear()},t.prototype.set=function(t,e,n){return void 0===n&&(n=!1),this.ignoreChange=n,this.dataMap.set(t,e)},t.prototype.get=function(t){var e=this.dataMap.get(t);return Object(l.isObservable)(e)?Object(l.toJS)(e):e},t.prototype.setDirty=function(){this.isDirty=!0},t.prototype.setClean=function(){this.isDirty=!1},t.prototype.reset=function(t){this.ignoreChange=!0,this.dataMap.clear(),this.setClean(),t&&this.dataMap.merge(t)},t.prototype.destroy=function(){this.destroyReaction()},t.prototype.toJS=function(){return this.dataMap.toJS()},ot([l.observable],t.prototype,"isDirty",void 0),ot([l.computed],t.prototype,"data",null),ot([l.computed],t.prototype,"isValid",null),ot([l.action],t.prototype,"set",null),ot([l.action],t.prototype,"setDirty",null),ot([l.action],t.prototype,"setClean",null),t}(),at=(function(){function t(){}t.required=function(t){var e=(void 0===t?{}:t).error;return{validate:function(t){return!!t},error:void 0===e?"This field is required":e}},t.notEmpty=function(t){var e=(void 0===t?{}:t).error;return{validate:function(t){return!!t&&!!t.trim()},error:void 0===e?"This field is required":e}},t.emailValidation=function(t){var e=(void 0===t?{}:t).error,n=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return{validate:function(t){return n.test(t)},error:void 0===e?"Please enter a valid email address":e}},t.passwordValidation=function(t){var e=(void 0===t?{}:t).error,n=/^\S{6,}$/;return{validate:function(t){return n.test(t)},error:void 0===e?"Your password must have at least 6 characters":e}},t.editorRequired=function(t){var e=(void 0===t?{}:t).error;return{validate:function(t){return t&&t.getCurrentContent().hasText()},error:void 0===e?"This field is required":e}},t.maxLength=function(t){var e=void 0===t?{}:t,n=e.maxLength,r=e.error;return{validate:function(t){return!t||t.length<=n},error:void 0===r?"Text too long":r}},t.urlValidation=function(t){var e=(void 0===t?{}:t).error,n=/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/;return{validate:function(t){return n.test(t)},error:void 0===e?"Url is not valid":e}},t.allTagsMaxLength=function(t){var e=void 0===t?{}:t,n=e.limit,r=void 0===n?25:n,o=e.error;return{validate:function(t){var e=!1;return t.split(",").forEach(function(t){(t=t.trim()).length<r&&(e=!0)}),e},error:void 0===o?"Tag cannot exceed "+r+" characters":o}}}(),function(t,e){var n=e.split("/").filter(function(t){return!!t});n.shift();for(var r=t;r&&n.length;){r=r[n.shift()]||r._}return r}),st=function(t,e){for(var n=e.split("/").filter(function(t){return!!t}),r=t,o=[n.shift()];r&&n.length;){var i=n.shift();if(r[i])o.push(i);else{if(!r._)return;o.push("_")}r=r[i]||r._}return o.join("/")},ut=function(t,e,n){void 0===n&&(n=["."]),et()(t,function(t,r){e(t,n.concat([r])),x()(t)&&ut(t,e,n.concat([r]))})},ct=function(){return(ct=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},lt=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},ft=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},ht=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},pt=function(t){return Q()(t.startsWith("."),"Invalid path structure. paths must start with `.`")},dt=function(t){var e=t.split("/");return"."!==e[0]&&e.unshift("."),e.join("/")},vt=function(){function t(t,e){this.dataFormStore=new it({},{}),this.settingsFormStore=new it({},{}),this.isLoadingActivePath=!1,this.isInitializing=!1,this.dataStore=t,this.authStore=e}return t.prototype.init=function(){var t=this;this.isInitializing=!0,this.authStore.onAuthStateChanged(function(e){return ft(t,void 0,void 0,function(){var t;return ht(this,function(n){switch(n.label){case 0:if(!e)return[3,8];t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dataStore.load("usersPermissions/"+e.uid)];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?(this.user=e,this.dataStore.listen("schema"),this.dataStore.listen("schemaSettings"),[3,7]):[3,5];case 5:return[4,this.createUserRequest(e)];case 6:n.sent(),this.logout(),n.label=7;case 7:return[3,9];case 8:this.user=null,n.label=9;case 9:return this.isInitializing=!1,[2]}})})})},t.prototype.logout=function(){return this.dataStore.clearCache("usersPermissions"),this.dataStore.clearCache("schemaSettings"),this.dataStore.clearCache("schema"),this.authStore.signOut()},t.prototype.isAdmin=function(){return!!this.user},t.prototype.createUserRequest=function(t){return this.dataStore.setValue("usersRequests/"+t.uid,{email:t.email,avatarUrl:t.photoURL})},t.prototype.getValue=function(t){var e,n=dt(t);if(this.isLoadingActivePath)return this.dataStore.getValue(n);if(this.activePath===n)return this.dataFormStore.get(this.activePath)||this.dataStore.getValue(n);if(this.activePath&&0===this.activePath.indexOf(n))return ct({},this.dataStore.getValue(n),((e={})[this.activePath.replace(n+"/","")]=this.dataFormStore.get(this.activePath)||this.dataStore.getValue(this.activePath),e));if(this.isPathPrimitive(n)){if(this.activePath&&0===n.indexOf(this.activePath)){var r=n.replace(this.activePath,"").split("/");if(r.shift(),1===r.length){var o=this.dataFormStore.get(this.activePath);return o&&o[r[0]]}return this.dataStore.getValue(n)}return this.dataStore.getValue(n)}return this.dataStore.getValue(n)},t.prototype.setActivePath=function(t){return ft(this,void 0,void 0,function(){var e,n,r=this;return ht(this,function(o){switch(o.label){case 0:return e=dt(t),this.activePath=e,this.dataFormStore.reset(),this.isLoadingActivePath=!0,[4,this.loadRequiredFieldsByPath(e)];case 1:return o.sent(),this.isLoadingActivePath=!1,n=this.dataStore.getValue(e)||{},this.isPathPrimitive(e)?this.dataFormStore.set(e,this.dataStore.getValue(e)):this.getPrimitiveKeysByPath(e).forEach(function(t){r.dataFormStore.set(e+"."+t,n[t])}),setTimeout(function(){return r.dataFormStore.setClean()},2),[2]}})})},t.prototype.submitData=function(){return ft(this,void 0,void 0,function(){var t,e,n=this;return ht(this,function(r){switch(r.label){case 0:return t=this.dataFormStore.get(this.activePath),e=this.dataStore.getValue(this.activePath),x()(t)&&x()(e)?[4,this.dataStore.setValue(this.activePath,ct({},e,t))]:[3,2];case 1:return r.sent(),[3,4];case 2:return[4,this.dataStore.setValue(this.activePath,t)];case 3:r.sent(),r.label=4;case 4:return setTimeout(function(){return n.dataFormStore.setClean()},2),[2]}})})},t.prototype.loadRequiredFieldsByPath=function(t){var e=this;return Promise.all(this.getPrimitiveKeysByPath(t).filter(function(n){return void 0===e.dataStore.getValue(t+"/"+n)}).map(function(n){return e.dataStore.load(t+"/"+n)}))},t.prototype.getSchemaByPath=function(t,e){pt(t);var n=this.getSchema(e);return at(n,t)},t.prototype.isPathPrimitive=function(t,e){pt(t);var n=this.getSchemaByPath(t,e);return!x()(n)},t.prototype.getPrimitiveKeysByPath=function(t){return pt(t),function(t,e){var n=at(t,e);return n?Object.keys(n).filter(function(t){return!x()(n[t])}):[]}(this.getSchema(),t)},t.prototype.getNonPrimitiveKeysByPath=function(t,e){pt(t);var n=this.getSchemaByPath(t,e);return this.isPathCollection(t)?Object.keys(this.dataStore.getValue(t)||{}):Object.keys(n).filter(function(t){return x()(n[t])})},t.prototype.clearActivePath=function(){this.activePath=null,this.dataFormStore.reset(),this.clearSettingsPath()},t.prototype.clearSettingsPath=function(){this.settingsFormStore.reset(),this.settingsPath=null},t.prototype.getSettingsByPath=function(t){pt(t);var e=this.getSchema(!0),n=this.getSchemaSettings(),r=st(e,t);return r===this.settingsPath?this.settingsFormStore.toJS():n?at(n,r):void 0},t.prototype.submitSettings=function(){return ft(this,void 0,void 0,function(){var t;return ht(this,function(e){switch(e.label){case 0:return t=this.settingsFormStore.toJS(),[4,this.dataStore.setValue("schemaSettings/"+this.settingsPath,t)];case 1:return e.sent(),this.clearSettingsPath(),[2]}})})},t.prototype.setSettingsPath=function(t){pt(t);var e,n=this.getSchema(!0),r=this.getSchemaSettings(),o=st(n,t);this.settingsPath=o,e=this.isPathCollection(t)?{collectionMainLabel:""}:{uiType:"text"},this.settingsFormStore.reset(ct({},e,at(r,o)))},t.prototype.isPathCollection=function(t){return!!this.getSchemaByPath(t,!0)._},t.prototype.createCollectionItem=function(t,e){return ft(this,void 0,void 0,function(){var n;return ht(this,function(r){return pt(t),n=e||this.dataStore.push(this.activePath).key,this.setActivePath(t+"/"+n),[2]})})},t.prototype.removeCollectionItem=function(t){return pt(t),this.dataStore.remove(t)},t.prototype.getSchema=function(t){return void 0===t&&(t=!1),ct({},this.dataStore.getValue("schema"),t?yt:{})},t.prototype.getSchemaSettings=function(){return ct({},this.dataStore.getValue("schemaSettings"),bt)},t.prototype.getUserPermissions=function(){return this.dataStore.getValue("usersPermissions/"+this.user.uid)},t.prototype.getCollectionsPaths=function(t){return e=this.getSchema(t),n=[],ut(e,function(t,e){"_"===e[e.length-1]&&n.push(e.slice(0,-1).join("/"))}),n;var e,n},t.prototype.approveUserRequest=function(t){return ft(this,void 0,void 0,function(){var e;return ht(this,function(n){switch(n.label){case 0:return e=this.dataStore.getValue("usersRequests/"+t),[4,this.dataStore.remove("usersRequests/"+t)];case 1:return n.sent(),[4,this.dataStore.setValue("usersPermissions/"+t,ct({},e,mt))];case 2:return n.sent(),[2]}})})},t.prototype.declineUserRequest=function(t){return this.dataStore.remove("usersRequests/"+t)},t.prototype.openModal=function(t,e){var n=this;return void 0===e&&(e={}),new Promise(function(r,o){n.modal={Component:t,props:ct({},e,{resolve:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.modal=null,r.apply(void 0,t)},reject:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.modal=null,o.apply(void 0,t)}})}})},lt([l.observable],t.prototype,"activePath",void 0),lt([l.observable],t.prototype,"settingsPath",void 0),lt([l.observable],t.prototype,"isLoadingActivePath",void 0),lt([l.observable],t.prototype,"isInitializing",void 0),lt([l.observable.ref],t.prototype,"user",void 0),lt([l.observable.ref],t.prototype,"modal",void 0),t}(),yt=((L={}).schema={},L.usersPermissions={_:{editData:"string",editPermissions:"string",editSchema:"string"}},L),bt=((M={}).usersPermissions={collectionMainLabel:"email",collectionImage:"avatarUrl",_:{editData:{uiType:"switch"},editPermissions:{uiType:"switch"},editSchema:{uiType:"switch"}}},M),mt={editData:!0},gt=n(10),St=n.n(gt),wt=(n(22),n(21),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Pt=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},xt=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},Ot=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};window.mobx=l,window.React=o.a,window.ReactDOM=a.a,window.PropTypes=u.a,window.classNames=d.a,window.autobind=h.a,window.firebase=St.a;var jt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.obState={isModifierKeyDown:!1,isActive:!1,isBusy:!1},e}return wt(e,t),e.prototype.getChildContext=function(){var t,e=this,n=this.props.store;return(t={}).OrkanContext={store:this.props.store,getValue:function(t){return e.orkanStore?e.orkanStore.getValue(t):n.getValue(t)},setActivePath:function(t){return e.orkanStore.setActivePath(t)},isEditMode:function(){var t=e.obState,n=t.isActive,r=t.isModifierKeyDown;return n&&e.orkanStore.isAdmin()&&r},openModal:function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.orkanStore&&(t=e.orkanStore).openModal.apply(t,n)}},t},e.prototype.componentWillMount=function(){b.bind("hold:1000:o",this.activate),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp),document.body.onblur=this.handleBlur},e.prototype.activate=function(){return xt(this,void 0,void 0,function(){var t,e,n,r,o,i,a=this;return Ot(this,function(s){switch(s.label){case 0:if(t=this.props,e=t.store,n=t.auth,this.obState.isActive)return[2];this.obState.isBusy=!0,s.label=1;case 1:return s.trys.push([1,4,,5]),[4,fetch("https://my-proj-5cbb6.firebaseapp.com/admin.js")];case 2:return r=s.sent(),o=eval,[4,r.text()];case 3:return o.apply(void 0,[s.sent()]),B=window.__orkan_admin__.default,delete window.__orkan_admin__,this.orkanStore=new vt(e,n),this.obState.isActive=!0,[3,5];case 4:return i=s.sent(),console.error(i),[3,5];case 5:return setTimeout(function(){a.obState.isBusy=!1},500),window.a=this.orkanStore,[2]}})})},e.prototype.handleBlur=function(t){this.obState.isModifierKeyDown=!1},e.prototype.handleKeyDown=function(t){"Meta"===t.key&&(this.obState.isModifierKeyDown=!0)},e.prototype.handleKeyUp=function(t){"Meta"===t.key&&(this.obState.isModifierKeyDown=!1)},e.prototype.render=function(){var t=this.props.children,e=this.obState,n=e.isActive,r=e.isBusy;return[t,(n||r)&&a.a.createPortal(o.a.createElement(Z,{isBusy:r||this.orkanStore&&this.orkanStore.isInitializing}),document.body),n&&a.a.createPortal(o.a.createElement(B,{store:this.orkanStore}),document.body)]},e.propTypes={store:u.a.instanceOf(D).isRequired,auth:u.a.object.isRequired},e.childContextTypes=((q={}).OrkanContext=u.a.object,q),e.contextTypes=((V={}).OrkanContext=u.a.object,V),Pt([l.observable.shallow],e.prototype,"obState",void 0),Pt([l.observable.ref],e.prototype,"orkanStore",void 0),Pt([h.a],e.prototype,"activate",null),Pt([h.a],e.prototype,"handleBlur",null),Pt([h.a],e.prototype,"handleKeyDown",null),Pt([h.a],e.prototype,"handleKeyUp",null),e=Pt([c.observer],e)}(r.Component);n.d(e,"OrkanProvider",function(){return jt}),n.d(e,"FirebaseStore",function(){return D})},function(t,e){t.exports=require("firebase/auth")},function(t,e){t.exports=require("firebase/database")},function(t,e){var n={},r=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},o=r(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),i=r(function(){return document.head||document.getElementsByTagName("head")[0]}),a=null,s=0,u=[];function c(t,e){for(var r=0;r<t.length;r++){var o=t[r],i=n[o.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](o.parts[a]);for(;a<o.parts.length;a++)i.parts.push(d(o.parts[a],e))}else{var s=[];for(a=0;a<o.parts.length;a++)s.push(d(o.parts[a],e));n[o.id]={id:o.id,refs:1,parts:s}}}}function l(t){for(var e=[],n={},r=0;r<t.length;r++){var o=t[r],i=o[0],a={css:o[1],media:o[2],sourceMap:o[3]};n[i]?n[i].parts.push(a):e.push(n[i]={id:i,parts:[a]})}return e}function f(t,e){var n=i(),r=u[u.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function h(t){t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function p(t){var e=document.createElement("style");return e.type="text/css",f(t,e),e}function d(t,e){var n,r,o;if(e.singleton){var i=s++;n=a||(a=p(e)),r=b.bind(null,n,i,!1),o=b.bind(null,n,i,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return e.rel="stylesheet",f(t,e),e}(e),r=function(t,e){var n=e.css,r=e.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),i=t.href;t.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}.bind(null,n),o=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=p(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){h(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");void 0===(e=e||{}).singleton&&(e.singleton=o()),void 0===e.insertAt&&(e.insertAt="bottom");var r=l(t);return c(r,e),function(t){for(var o=[],i=0;i<r.length;i++){var a=r[i];(s=n[a.id]).refs--,o.push(s)}t&&c(l(t),e);for(i=0;i<o.length;i++){var s;if(0===(s=o[i]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete n[s.id]}}}};var v,y=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function b(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=y(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(i).concat([o]).join("\n")}var a;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){(e=t.exports=n(24)(!1)).push([t.i,"@keyframes H1cUm {\n  0% {\n    transform: translateX(-10px); }\n  99% {\n    transform: translateX(0);\n    opacity: 1; }\n  100% {\n    transform: none; } }\n\n@keyframes _13zm7 {\n  from {\n    opacity: 0;\n    transform: translateX(-5px); }\n  to {\n    transform: translateX(0);\n    opacity: 1; } }\n\n@keyframes wDKyb {\n  from {\n    opacity: 0;\n    transform: translateY(-50%); }\n  to {\n    transform: translateY(0);\n    opacity: 1; } }\n\n@keyframes _1x4NH {\n  from {\n    opacity: 0;\n    transform: translate3d(0, -100%, 0); }\n  to {\n    opacity: 1;\n    transform: translate3d(0, 0, 0); } }\n\n@keyframes _1G18c {\n  from {\n    transform: translate3d(-50%, -100%, 0); }\n  to {\n    transform: translate3d(-50%, 0, 0); } }\n\n@keyframes _3Qbe0 {\n  from {\n    opacity: 0;\n    transform: translate3d(-60%, -50%, 0); }\n  to {\n    opacity: 1;\n    transform: translate3d(-50%, -50%, 0); } }\n\n._37tPp {\n  z-index: 99999999999999;\n  animation: _1x4NH;\n  animation-timing-function: ease-in-out;\n  animation-duration: .2s;\n  width: 100%;\n  height: 5px;\n  position: fixed;\n  top: 0;\n  left: 0; }\n  ._37tPp:after {\n    animation-timing-function: linear !important;\n    animation: _16YFG;\n    animation-duration: 1s;\n    animation-iteration-count: infinite;\n    animation-fill-mode: both;\n    transform: translate3d(0, 0, 0);\n    transition: transform 3s ease-in-out;\n    content: '';\n    position: absolute;\n    left: -68px;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    background: repeating-linear-gradient(45deg, #FA2949, #FA2949 20px, #fc7489 20px, #fc7489 40px); }\n  ._37tPp.BsLwr:after {\n    animation-play-state: running; }\n  ._37tPp._3YDZ6:after {\n    animation-play-state: paused; }\n\n@keyframes _16YFG {\n  from {\n    transform: translate3d(0, 0, 0); }\n  to {\n    transform: translate3d(58px, 0, 0); } }\n",""]),e.locals={root:"_37tPp",orkanTopUiAnimation:"_1x4NH",OrkanIndicatorBusyAnimation:"_16YFG",busy:"BsLwr",notBusy:"_3YDZ6",listItemAnimation:"H1cUm",smallListItemAnimation:"_13zm7",modalAnimation:"wDKyb",AuthAnimation:"_1G18c",editableOverlayAnimation:"_3Qbe0"}},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}])});
//# sourceMappingURL=orkan.js.map